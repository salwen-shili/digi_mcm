<?xml version="1.0" encoding="utf-8"?>
<!-- Dans ce rapport on traite la notion de multi_compagnie par compagnie_id  -->
<!-- compagnie_id== 1  MCM_Academy -->
<!-- compagnie_id== 2  Digimoov -->
<odoo>
    <data>
        <!-- Inherit invoice report (from module account) -->
        <template id="mcm_report_invoice_document" inherit_id="account.report_invoice_document">
            <xpath expr="//t[@t-set='address']" position="replace">
                <div class="row">
                    <div class="col-6">
                    </div>
                    <div class="col-4 offset-2">
                        <strong>
                            <span>Date de facture:</span>
                            <span t-field="o.invoice_date"/>
                        </strong>
                    </div>
                </div>
            </xpath>
            <xpath expr="//div[hasclass('page')]//h2" position="replace">
                <h2>
                    <span style="font-size[]: 20px;" t-if="o.type == 'out_invoice' and o.state == 'posted' "></span>
                    <!--                    <span style="font-size: 20px;" t-if="o.type == 'out_invoice' and o.state == 'posted'">Facture Acompte</span>-->
                    <span style="font-size: 20px;" t-if="o.type == 'out_invoice' and o.state == 'draft'">Facture
                        brouillon
                    </span>
                    <span style="font-size: 20px;" t-if="o.type == 'out_invoice' and o.state == 'cancel'">Facture
                        Annulé
                    </span>
                    <span style="font-size: 20px;" t-if="o.type == 'out_refund'"></span>
                    <span style="font-size: 20px;" t-if="o.type == 'in_refund'">Note de crédit fournisseur</span>
                    <span style="font-size: 20px;" t-if="o.type == 'in_invoice'"></span>
                    <span style="font-size: 20px;" t-if="o.name != '/'" t-field="o.name"/>
                </h2>
            </xpath>
            <xpath expr="//div[hasclass('page')]/h2//span[@t-field='o.name']" position="replace">
                <strong>
                    <span style="font-size: 20px;" t-if="o.name != '/'" t-field="o.name"/>
                </strong>
            </xpath>
            <xpath expr="//div[@id='informations']" position="replace">
                <div id="informations" class="row mt32 mb32">
                    <div class="col-auto mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                        <strong>Destinataire:</strong>
                        <t t-if="o.partner_id.company_name">
                            <span class="m-0" t-field="o.partner_id.company_name"/>
                            <br/>
                            <strong>Stagiaire:</strong>
                            <span class="m-0" t-field="o.partner_id.name"/>
                        </t>
                        <t t-else="">
                            <span class="m-0" t-field="o.partner_id.name"/>
                        </t>
                        <br/>
                        <t t-if="o.partner_id.numero_cpf">
                            <span class="m-0">Numéro Dossier N°</span>
                            <span class="m-0" t-field="o.partner_id.numero_cpf"/>
                        </t>
                        <address t-field="o.partner_id"
                                 t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: True}"/>
                    </div>
                    <div class="col-auto mw-100 mb-2">
                    </div>
                    <div class="col-auto mw-100 mb-2">
                    </div>
                    <div class="col-auto mw-100 mb-2">
                    </div>
                    <div class="col-auto mw-100 mb-2">
                    </div>
                    <div class="col-auto mw-200 mb-4">
                    </div>
                    <div class="col-auto mw-100 mb-2" name="formation_details">
                        <!-- Dans ce rapport on traite la notion de multi_compagnie par compagnie_id  -->
                        <!-- compagnie_id== 1 c'est pour MCM_Academy -->
                        <!-- compagnie_id== 2 c'est pour Digimoov -->
                        <h6 t-if="o.company_id.id==1">
                            <span>Intitulé de la formation:</span>
                            <t t-foreach="o.invoice_line_ids"
                               t-as="line">
                                <strong>
                                    <span t-field="line.product_id.name" t-options="{'widget': 'text'}"/>
                                </strong>
                            </t>
                        </h6>
                        <h6 t-if="o.company_id.id==2">
                            <span>Intitulé de la formation:</span>
                            <strong>
                                <span t-field="o.module_id.name" t-options="{'widget': 'text'}"/>
                            </strong>
                        </h6>
                        <h6 t-if="o.module_id.product_id.distance_formation==False">
                            <span>Lieu de la formation:</span>
                            <span t-field="o.partner_id.module_id.lieu.address"/>
                        </h6>
                        <h6 t-if="o.module_id.product_id.distance_formation==True">
                            <span>Lieu de la formation: à distance</span>
                        </h6>
                        <h6 t-if="o.partner_id.module_id.product_id.distance_formation==False">
                            <span>lieu d'examen :</span>
                            <span t-field="o.module_id.ville" t-options="{'widget': 'text'}"
                                  style="text-transform: capitalize;"/>
                        </h6>
                        <h6 t-if="o.partner_id.module_id.product_id.distance_formation==False and o.company_id.id==1">
                            <span>Dates de la formation: du</span>
                            <span t-field="o.partner_id.module_id.date_debut" t-options="{'widget': 'date'}"/>
                            <span>au</span>
                            <span t-field="o.module_id.date_exam" t-options="{'widget': 'date'}"/>
                        </h6>
                        <h6 t-if="o.module_id and o.company_id.id==2">
                            <span>Dates de la formation: du</span>
                            <span t-field="o.partner_id.module_id.date_debut" t-options="{'widget': 'date'}"/>
                            <span>au</span>
                            <span t-field="o.module_id.date_exam" t-options="{'widget': 'date'}"/>
                        </h6>
                        <h6 t-if="o.module_id.duree and o.company_id.id==2">
                            <span>Durée de la formation:</span>
                            <span t-field="o.module_id.duree"/>
                            heures compris examen ( 3 heures )
                        </h6>
                        <!--                        <h6 invisible="1">-->
                        <!--                            <span>Reference:</span>-->
                        <!--                            <span t-field="o.partner_id.module_id.duree"/>-->
                        <!--                        </h6>-->
                        <h6 t-if="o.methodes_payment=='cpf'">
                            <span>Prix de la formation:</span>
                            <span t-field="o.amount_total"
                                  t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                        </h6>
                    </div>
                    <div class="col-auto mw-200 mb-4" name="reference" invisible="1" style="visibility:hidden;">
                    </div>
                </div>
                <br></br>
            </xpath>
            <xpath expr="//table[@name='invoice_line_table']" position="replace">
                <table style="width: 100%;margin-bottom: 1rem;border-color:#000" name="invoice_line_table">
                    <thead>
                        <tr style="background-color: #E8E8E8;">
                            <!-- TODO: remove in master -->
                            <t t-set="colspan" t-value="6"/>
                            <th name="th_description" class="text-center"
                                style="border: 1px solid black; width: 267px;">
                                <span>Désignation</span>
                            </th>
                            <!--                            <th name="th_source" class="d-none text-center" style="border: 1px solid black;">-->
                            <!--                                <span>Source Document</span>-->
                            <!--                            </th>-->
                            <th name="th_quantity" class="text-center" style="border: 1px solid black;">
                                <span>Quantité</span>
                            </th>
                            <th name="th_priceunit"
                                t-attf-class="text-center"
                                style="border: 1px solid black;">
                                <span>Prix unitaire HT</span>
                            </th>
                            <th name="th_price_unit" t-if="display_discount"
                                style="border: 1px solid black;">
                                <span>Disc.%</span>
                                <!-- TODO: remove in master -->
                                <t t-set="colspan" t-value="colspan+1"/>
                            </th>
                            <th name="th_subtotal" class="text-center" style="border: 1px solid black;">
                                <span groups="account.group_show_line_subtotals_tax_excluded"
                                      t-if="o.methodes_payment!='cpf'">Total HT
                                </span>
                                <span groups="account.group_show_line_subtotals_tax_excluded"
                                      t-if="o.methodes_payment=='cpf'">Total TTC
                                </span>
                                <span groups="account.group_show_line_subtotals_tax_included">Prix Total</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody class="invoice_tbody">
                        <t t-set="current_subtotal" t-value="0"/>
                        <t t-foreach="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"
                           t-as="line">
                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                               groups="account.group_show_line_subtotals_tax_excluded"/>
                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                               groups="account.group_show_line_subtotals_tax_included"/>

                            <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                    <td name="account_invoice_line_name" class="text-center"
                                        style="border: 1px solid black;">
                                        <strong>
                                            <span t-if="o.methodes_payment!='cpf'" t-field="line.product_id.name"
                                                  t-options="{'widget': 'text'}"/>
                                            <span t-if="o.methodes_payment=='cpf'" t-options="{'widget': 'text'}">
                                                Montant calculé selon CGU
                                            </span>

                                        </strong>
                                    </td>
                                    <!--                                    <td name="account_invoice_line_name" class="text-center"-->
                                    <!--                                        style="border: 1px solid black;" t-if="o.company_id.id==2">-->
                                    <!--&lt;!&ndash;                                        <strong>&ndash;&gt;-->
                                    <!--&lt;!&ndash;                                            <span>Acompte </span>&ndash;&gt;-->
                                    <!--&lt;!&ndash;                                            <span t-field="line.product_id.name" t-options="{'widget': 'text'}"/>&ndash;&gt;-->
                                    <!--&lt;!&ndash;                                        </strong>&ndash;&gt;-->
                                    <!--                                    </td>-->
                                    <td class="text-center" style="border: 1px solid black;">
                                        <span t-field="line.quantity"/>
                                        <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                    </td>
                                    <td t-attf-class="text-center"
                                        style="border: 1px solid black;" t-if="not o.pricelist_id">
                                        <span t-field="line.price_unit"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        <!--                                        <span t-field="line.price_unit" t-options='{"widget": "monetary", "display_currency": o.currency_id}' t-if = "o.pricelist_id" />-->
                                        <!--                                        <span-->
                                        <!--                                                t-foreach="o.pricelist_id.item_ids" t-as="item"-->
                                        <!--                                            t-if="o.module_id.product_id==item.product_tmpl_id and o.pricelist_id"-->
                                        <!--                                                t-field="o.module_id.product_id.list_price" t-options='{"widget": "monetary", "display_currency": o.currency_id}'-->
                                        <!--                                        />-->
                                    </td>
                                    <td t-attf-class="text-center"
                                        style="border: 1px solid black;" t-if="o.pricelist_id">
                                        <span t-field="o.module_id.product_id.list_price"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                    </td>

                                    <td t-if="display_discount"
                                        t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"
                                        style="border: 1px solid black;">
                                        <span t-field="line.discount"/>
                                    </td>
                                    <td class="text-center o_price_total" style="border: 1px solid black;"
                                        t-if="not o.pricelist_id">

                                        <span t-field="line.price_subtotal"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'></span>


                                        <!--                                        -->
                                        <!--                                          -->
                                        <!--                                        <span-->
                                        <!--                                         t-foreach="o.pricelist_id.item_ids" t-as="item"-->
                                        <!--                                        t-if="o.module_id.product_id==item.product_tmpl_id and o.pricelist_id"-->
                                        <!--                                                t-field="o.module_id.product_id.list_price" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>-->
                                        <!--                                        <span t-field="line.price_total "></span>-->
                                        <!--                                              groups="account.group_show_line_subtotals_tax_included" t-if="o.methodes_payment=='cpf'"/>-->
                                        <!--                                        <span t-field="o.module_id.product_id.list_price"-->
                                        <!--                                              groups="account.group_show_line_subtotals_tax_excluded" t-if="o.methodes_payment=='cartebleu'" t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>-->
                                        <!--                                        <span t-field="o.module_id.product_id.list_price"-->
                                        <!--                                              groups="account.group_show_line_subtotals_tax_included" t-if="o.methodes_payment=='cartebleu' and o.type_facture == 'interne'" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>-->
                                    </td>
                                    <td class="text-center o_price_total" style="border: 1px solid black;"
                                        t-if="o.pricelist_id">

                                        <span t-field="o.module_id.product_id.list_price"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'></span>
                                    </td>

                                </t>
                                <t t-if="line.display_type == 'line_section'">
                                    <td colspan="99">
                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                    </td>
                                    <t t-set="current_section" t-value="line"/>
                                    <t t-set="current_subtotal" t-value="0"/>
                                </t>
                                <t t-if="line.display_type == 'line_note'">
                                    <td colspan="99">
                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                    </td>
                                </t>
                            </tr>
                            <tr t-if="o.company_id.id==2">
                                <t t-if="o.pricelist_id" name="pricelist_line">
                                    <t t-foreach="o.pricelist_id.item_ids" t-as="item">
                                        <t t-if="o.module_id.product_id==item.product_tmpl_id and o.pricelist_id">
                                            <!--                                    <td name="td_remise_price" class="text-center" style="border: 1px solid black;">-->
                                            <td name="account_invoice_pricelist_name" class="text-center"
                                                style="border: 1px solid black;">
                                                <strong>
                                                    <span t-options="{'widget': 'text'}">Code promo</span>
                                                    <span t-field="o.pricelist_id.code" t-options="{'widget': 'text'}"/>

                                                </strong>
                                            </td>
                                            <td style="border: 1px solid black;"></td>
                                            <td name="account_invoice_pricelist_price" class="text-center"
                                                style="border: 1px solid black;">

                                                <td name="td_remise_price" class="text-center"
                                                    style="border: 1px solid black;">
                                                    <span>-</span>
                                                    <span
                                                            t-field="item.price_difference"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                </td>


                                            </td>

                                        </t>
                                    </t>
                                </t>
                            </tr>

                            <t t-if="current_section and (line_last or o.invoice_line_ids[line_index+1].display_type == 'line_section')">
                                <tr class="is-subtotal text-center">
                                    <td colspan="99">
                                        <strong class="mr16">Subtotal</strong>
                                        <span t-esc="current_subtotal"
                                              t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <t t-if="o.acompte_invoice">
                            <tr>

                            </tr>
                        </t>
                    </tbody>
                </table>

                <!--                <table style="width: 100%;margin-bottom: 1rem;border-color:#000" name="invoice_line_table_cpf_solde" t-if="o.cpf_solde_invoice==True">-->
                <!--                    <thead>-->
                <!--                        <tr style="background-color: #E8E8E8;">-->
                <!--                            &lt;!&ndash; TODO: remove in master &ndash;&gt;-->
                <!--                            <t t-set="colspan" t-value="6"/>-->
                <!--                            <th name="th_description" class="text-center" style="border: 1px solid black;">-->
                <!--                                <span>Désignation</span>-->
                <!--                            </th>-->
                <!--                            <th name="th_subtotal" class="text-center" style="border: 1px solid black;">-->
                <!--                                <span groups="account.group_show_line_subtotals_tax_excluded">Total HT</span>-->
                <!--                            </th>-->
                <!--                        </tr>-->
                <!--                    </thead>-->
                <!--                    &lt;!&ndash;<tbody class="invoice_tbody">-->
                <!--                        <t t-set="current_subtotal" t-value="0"/>-->
                <!--                            <tr>-->
                <!--                                    <td name="account_link" class="text-center"-->
                <!--                                        style="border: 1px solid black;" t-if="o.cpf_solde_invoice==True and o.ref">-->
                <!--                                        <strong>-->
                <!--                                            <span >Acompte lié </span >-->
                <!--                                            <span t-field="o.ref" t-options="{'widget': 'text'}"/>-->
                <!--                                        </strong>-->
                <!--                                    </td>-->
                <!--                                    <td name="account_invoice_line_name" class="text-center"-->
                <!--                                        style="border: 1px solid black;" t-if="o.cpf_solde_invoice==True">-->
                <!--                                            <span>-</span>-->
                <!--                                            <span t-field="o.cpf_acompte_amount"/>-->
                <!--                                    </td>-->
                <!--                            </tr>-->
                <!--                    </tbody>&ndash;&gt;-->
                <!--                </table>-->
            </xpath>
            <!-- Dans ce rapport on traite la notion de multi_compagnie par compagnie_id  -->
            <!-- compagnie_id== 1 c'est pour MCM_Academy -->
            <!-- compagnie_id== 2 c'est pour Digimoov -->
            <xpath expr="//table[@name='invoice_line_table']" position="after">
                <table style="width: 100% ;border-color:#000" name="Acount_Client"
                       t-if="o.methodes_payment == 'cpf' and o.pourcentage_acompte !=0">
                    <tr>
                        <td class="text-center"
                            style="background-color: #E8E8E8; border: 1px solid black; padding: 5px; width: 267px;"
                            t-if="o.methodes_payment == 'cpf' and o.pourcentage_acompte !=0">
                            Acompte déja Reçu :
                        </td>
                        <td class="text-center o_price_total" style="border: 1px solid black; padding: 5px">
                            <span t-field="o.pourcentage_acompte" readonly="False" t-if="o.methodes_payment == 'cpf'"/>%
                        </td>
                        <td class="text-center o_price_total" style="border: 1px solid black; padding: 5px">
                            <strong>
                                <span t-field="o.cpf_acompte_amount" t-if="o.methodes_payment == 'cpf'"></span>
                                <span t-field="o.module_id.product_id.list_price"
                                      t-if="o.methodes_payment == 'cartebleu'"/>
                            </strong>
                        </td>
                    </tr>
                </table>
                <br>

                </br>
            </xpath>

            <xpath expr="//div[hasclass('clearfix')]" position="replace">
                <div class="clearfix">
                    <div id="total" class="row">
                        <div class="col-4">
                        </div>
                        <div class="col-8">
                            <br>

                            </br>
                            <table style="margin-bottom: 1rem;border-color:#000" name="total">
                                <tr>
                                    <td t-if="o.methodes_payment != 'cpf'" class="text-left"
                                        style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">
                                        Total HT
                                    </td>
                                    <td t-if="o.methodes_payment == 'cpf'" class="text-left"
                                        style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">
                                        Montant calculé selon CGU
                                    </td>
                                    <td class="text-left" style="border: 1px solid black; padding: 5px">
                                        <span t-field="o.amount_untaxed" t-if="o.methodes_payment == 'cpf'"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        <span t-field="o.amount_total" t-if="o.methodes_payment  =='cartebleu'"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        <span t-field="o.amount_untaxed"
                                              t-if="o.company_id.id==1 and o.methodes_payment!='cpf' and o.methodes_payment !='cartebleu'"
                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                    </td>
                                    <tr>
                                        <td class="text-left"
                                            style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">
                                            Prestations de formation en exonération de TVA, article 261-
                                            4-4 du CGI
                                        </td>
                                        <td class="text-center o_price_total"
                                            style="border: 1px solid black; padding: 5px">
                                            <strong>
                                                <span t-field="o.amount_tax"/>
                                            </strong>


                                        </td>
                                    </tr>

                                    <!-- Dans ce rapport on traite la notion de multi_compagnie par compagnie_id  -->
                                    <!-- compagnie_id== 1 c'est pour MCM_Academy -->
                                    <!-- compagnie_id== 2 c'est pour Digimoov -->
                                    <tr t-if="o.methodes_payment =='cartebleu'">
                                        <td class="text-left"
                                            style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">
                                            Total
                                        </td>
                                        <td class="text-left" style="border: 1px solid black; padding: 5px"
                                            t-if="o.methodes_payment =='cartebleu'">
                                            <span t-field="o.amount_total" t-if="o.methodes_payment =='cartebleu'"/>
                                        </td>
                                        <td class="text-center o_price_total"
                                            style="border: 1px solid black; padding: 5px"
                                            t-if="o.methodes_payment == 'cpf'">
                                            <span t-field="o.restamount" t-if="o.company_id.id==2 "/>
                                        </td>
                                    </tr>
                                </tr>
                                <!--                                    <td class="text-left"-->
                                <!--                                        style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">-->
                                <!--                                        Total-->
                                <!--                                    </td>-->

                                <!--                                    <td class="text-center o_price_total" style="border: 1px solid black; padding: 5px">-->
                                <!--                                        <strong>-->
                                <!--                                             <span t-field="o.amount_total" t-if="o.type_facture=='web'"/>-->
                                <!--                                        </strong>-->
                                <!--                                    </td>-->

                                <tr t-if="o.methodes_payment == 'cpf'">
                                    <td class="text-left"
                                        style="background-color: #E8E8E8; border: 1px solid black; padding: 5px"
                                        t-if="o.methodes_payment == 'cpf'">
                                        <strong>Total</strong>
                                    </td>
                                    <td class="text-center o_price_total" style="border: 1px solid black; padding: 5px">
                                        <strong>
                                            <span t-field="o.amount_residual"
                                                  t-if="o.methodes_payment == 'cpf' and o.pourcentage_acompte != 0 and o.company_id.id==2 "/>
                                            <span t-field="o.amount_total"
                                                  t-if="o.methodes_payment == 'cpf' and o.pourcentage_acompte == 0 and o.company_id.id==2"/>
                                            <span t-field="o.amount_total" t-if="o.company_id.id==1"/>
                                        </strong>
                                    </td>
                                </tr>
                                <tr t-if="o.company_id.id==1 and o.methodes_payment!='cpf' and o.methodes_payment !='cartebleu'">
                                    <td class="text-left"
                                        style="background-color: #E8E8E8; border: 1px solid black; padding: 5px">
                                        <strong>Total</strong>
                                    </td>
                                    <td class="text-center o_price_total" style="border: 1px solid black; padding: 5px">
                                        <strong>
                                            <span t-field="o.amount_total" t-if="o.company_id.id==1"/>
                                        </strong>
                                    </td>
                                </tr>

                            </table>
                        </div>

                    </div>
                </div>
            </xpath>
            <xpath expr="//div[hasclass('page')]//p[1]" position="replace">
                <div class="row">
                    <div class="col-4">
                        <p>
                            <font style="font-size: 12px; font-style: italic;">
                                Conformément à l’article L. 441-6 du code de commerce, les
                                pénalités de retards seront calculées à partir de 3 fois le taux
                                d’intérêt légal en vigueur et seront dues à défaut de règlement le
                                jour suivant la date de paiement figurant sur la facture.
                            </font>
                        </p>
                    </div>
                    <div class="col-4">
                        <span t-if="o.invoice_payment_state=='paid' and o.state=='posted'" style="color: #B22222;"
                              class="text-right">
                            <strong>Facture acquittée
                            </strong>
                        </span>
                    </div>
                    <div class="col-4">
                        <span t-if="o.state=='cancel'" style="color: #B22222;" class="text-right">
                            <strong>Facture
                                Annulé
                            </strong>
                        </span>
                    </div>
                </div>
            </xpath>
            <xpath expr="//div[hasclass('page')]//p[2]" position="replace">
                <div id="total" class="row">
                    <div class="col-3">
                    </div>
                    <div class="col-9">
                        <br/>
                        <table style="border: 1px solid black; width:100% ">
                            <tr>
                                <td style="border: 1px solid black; padding: 5px">Code banque
                                    <br/>
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.bank_code"/>
                                        </strong>
                                    </t>
                                </td>
                                <td style="border: 1px solid black; padding: 5px">Code guichet
                                    <br/>
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.guichet_code"/>
                                        </strong>
                                    </t>
                                </td>
                                <td style="border: 1px solid black; padding: 5px">N°compte
                                    <br/>
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.number_of_account"/>
                                        </strong>
                                    </t>
                                </td>
                                <td style="border: 1px solid black; padding: 5px">Clé RIB
                                    <br/>
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.rib"/>
                                        </strong>
                                    </t>
                                </td>
                                <td style="border: 1px solid black; padding: 5px">Monnaie
                                    <br/>
                                    <span t-field="o.company_id.currency_id.name"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="border: 1px solid black; padding: 5px">IBAN
                                    <br/>
                                    <!--                                    FR76 3000 3033 5000 0270 0818 863-->
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.acc_number"/>
                                        </strong>
                                    </t>

                                </td>
                                <td colspan="2" style="border: 1px solid black; padding: 5px">BIC
                                    <br/>
                                    <t t-foreach="o.company_id.partner_id.bank_ids"
                                       t-as="bank">
                                        <strong t-if="bank.bic=='SOGEFRPP'">
                                            <span t-field="bank.bic"/>
                                        </strong>
                                    </t>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </xpath>
            <!--            <xpath expr="//div[hasclass('page')]//p[4]" position="replace">-->
            <!--                            <p t-if="o.fiscal_position_id.note" name="note">-->
            <!--                                <span></span>-->
            <!--                            </p>-->
            <!--            </xpath>-->
            <!--             <xpath expr="//record[@id='fiscal_position_template_import_export'/field[@name='note']" position="replace">-->
            <!--                  <span></span>-->
            <!--            </xpath>-->
            <xpath expr="//div[@id='qrcode']" position="replace">
                <div id="qrcode"
                     t-if="(o.company_id.qr_code) and (o.currency_id.name == 'EUR') and (o.invoice_partner_bank_id.acc_number != False)">
                    <p t-if="(o.invoice_partner_bank_id.qr_code_valid)">
                    </p>
                    <p t-if="(o.invoice_partner_bank_id.qr_code_valid == False)">
                    </p>
                </div>
            </xpath>
        </template>
        <template id="mcm_external_layout_standard"
                  inherit_id="web.external_layout_standard">
            <xpath expr="//div[1]" position="replace">
                <div class="header">
                    <div class="row">
                        <div class="col-6" name="company_address">
                            <strong>
                                <span t-field="company.partner_id.name"/>
                            </strong>
                            <div>
                                <span t-field="company.partner_id.street"/>
                            </div>
                            <div>
                                <span t-field="company.partner_id.zip"/>
                                <span t-field="company.partner_id.city"/>
                            </div>
                            <div>
                                <span t-field="company.website[8:-1]"/>
                            </div>
                        </div>
                        <div class="col-6" name="company_logo">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                 style="max-height: 60px; float:right" alt="Logo"/>
                        </div>
                    </div>
                </div>
                <br/>
            </xpath>
        </template>
        <template id="footer_external_layout_standard"
                  inherit_id="web.external_layout_standard">
            <xpath expr="//div[@class='footer o_standard_footer']//div//ul" position="replace">
                <ul class="list-inline mb4">
                    <!-- using the list-inline-item class from bootstrap causes weird behaviours in pdf report
                         adding d-inline class fixes the problem-->
                    <li t-if="company.website" class="list-inline-item d-inline">
                        <span t-field="company.website[8:-1]"/>
                    </li>
                </ul>
            </xpath>

        </template>
    </data>
</odoo>