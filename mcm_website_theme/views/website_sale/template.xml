<odoo>


    <template id="mcm_website_theme.payment_tokens_list" inherit_id="payment.payment_tokens_list">
        <xpath expr="//button[@id='o_payment_form_pay']" position="after">
            <input t-att-value="request.website.microsoft_tracking_key" id="microsoft_tracking_key" type="hidden" />
            <input t-att-value="request.website.id" id="website" type="hidden" />
            <body onload='verify_PM()'>
                <a role="button" href="#" t-attf-onclick="linkTo()" style="display:none;" class="btn btn-primary" id="link_to">s'inscrire
                </a>
            </body>
            <!-- <script type="text/javascript" src="/mcm_website_theme/static/src/js/msAdsPayement.js"/> -->
        </xpath>
        <xpath expr="//label[1]" position="replace">
            <label>
                <t t-if="acq.payment_flow == 'form'">
                    <input type="radio" t-att-data-acquirer-id="acq.id" t-att-data-form-payment="true" t-att-data-provider="acq.provider" t-att-class="'d-none' if (acquirers_count==1 and pms_count==0) else ''" name="pm_id" t-attf-id="{{acq.code}}" t-attf-value="{{acq.code}}" t-att-checked="acquirers_count==1 and pms_count==0 or acquirers[0] == acq" t-attf-onclick="verify_PM()" />
                </t>
                <t t-else="acq.payment_flow == 's2s'">
                    <input type="radio" t-att-data-acquirer-id="acq.id" t-att-data-s2s-payment="true" t-att-data-provider="acq.provider" name="pm_id" t-attf-value="new_{{acq.id}}" t-att-class="'d-none' if (acquirers_count==1 and pms_count==0) else ''" t-att-checked="acquirers_count==1 and pms_count==0 or acquirers[0] == acq" />
                </t>
                <span class="payment_option_name">
                    <t t-esc="acq.display_as or acq.name" />
                    <div t-if="acq.state == 'test'" class="badge-pill badge-warning float-right" style="margin-left:5px">
                        Test Mode
                    </div>
                </span>
                <t t-if="acq_extra_fees and acq_extra_fees.get(acq)">
                    <span class="badge badge-pill badge-secondary">
                        +
                        <t t-esc="acq_extra_fees[acq]" t-options='{"widget": "monetary", "display_currency": acq_extra_fees["currency_id"]}' />
                        Fee
                    </span>
                </t>
                <t t-elif="acq.fees_active">
                    <small class="text-muted">(Some fees may apply)</small>
                </t>
            </label>
        </xpath>
        <xpath expr="//input[@name='csrf_token']" position="before">
            <script>
                function verify_PM(){ stripe=document.getElementById('stripe');
                if(stripe) {
                if (document.getElementById('stripe').checked) {
                document.getElementById("o_payment_form_pay").style.visibility = "visible";
                document.getElementById("link_to").style.display = "none";
                } else {
                document.getElementById("o_payment_form_pay").style.visibility = 'hidden';
                document.getElementById("link_to").style.display = 'inline-block';
                }
                }
                };

                function linkTo(){
                if (document.getElementById('pole_emploi').checked) {
                document.getElementById("link_to").href="/contactus";
                }
                };
            </script>
        </xpath>
    </template>

    <template id="mcm_website_sale_total" inherit_id="website_sale.total">

        <xpath expr="//tr[@id='order_total_taxes']" position="after">
            <tr id="order_instalment" t-if="website_sale_order.instalment_number&gt;1 and website_sale_order.pricelist_id and website_sale_order.pricelist_id.id==1" style="visibility:visible">
                <td class="text-right border-0" style="color: var(--blue-shop);  font-weight: 700;">
                    <label for="checkbox_instalment">
                        <span>Paiement en </span>
                        <span t-field="website_sale_order.instalment_number" style="white-space: nowrap;" />
                        <span> fois </span>
                    </label>
                </td>
                <td class="text-xl-right border-0">

                    <input type="checkbox" id="checkbox_instalment" style="white-space: nowrap;" class="text-xl-right border-0" t-att-checked="website_sale_order.instalment" t-att-value="website_sale_order.instalment" onclick="displayInstalmentPayment()" />
                </td>
            </tr>
            <body>
                <tr id="order_instalment_number" style="visibility: hidden;">
                    <td class="text-right border-0">Tranches:</td>
                    <td class="text-xl-right border-0">
                        <span t-field="website_sale_order.instalment_number" style="white-space: nowrap;" />
                    </td>
                </tr>
            </body>
        </xpath>

        <xpath expr="//tr[@id='order_total_untaxed']" position="before">
            <t t-foreach="website_sale_order.website_order_line" t-as="line">
                
                  
                    <tr t-if="line.product_id.product_tmpl_id" class="tr-product_name">
                        <div style="    margin-right: 11px;">
                            <t t-call="website_sale.cart_line_product_link">
                                <strong t-field="line.name_short"/>
                            </t>
                            <span class="td-action float-right">
                                <a onclick="(function(){if (document.getElementById('js_delete_cart')){document.getElementById('js_delete_cart').click();}})()" href="#" aria-label="Remove from cart" title="Remove from cart" class="js_delete_product no-decoration"> <small><i class="fa fa-trash-o"/></small></a>
                            </span>
                        </div>
                      
                     
                    </tr>
                   
                  
                    
            
            </t>
            
        </xpath>
        <xpath expr="//tr[@id='order_total']" position="after">
            <body>
                <tr id="order_amount_to_pay" style="visibility: hidden;">
                    <td class="text-right">
                        <strong>Montant à payer:</strong>
                    </td>
                    <td class="text-xl-right">
                        <strong t-field="website_sale_order.amount_to_pay" class="monetary_field" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: website_sale_order.pricelist_id.currency_id}" />
                    </td>
                </tr>
            </body>
        </xpath>
        


    </template>

    <!-- change mode de financement and cpf details  -->
    <template id="mcm_website_sale_cart_lines" inherit_id="website_sale.cart_lines">
        <xpath expr="//td[4]" position="replace">
            <style>
                #cart_products{
                    display:none;
                }
            </style>
            <div class="css_quantity input-group mx-auto" style="display:none">
                <div class="input-group-prepend">
                    <a t-attf-href="#" class="btn btn-link js_add_cart_json d-none d-md-inline-block" aria-label="Remove one" title="Remove one">
                        <i id="js_delete_cart" class="fa fa-minus"></i>
                    </a>
                    
                </div>
              
                <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                <div class="input-group-append">
                    <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block" aria-label="Add one" title="Add one">
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
            <td class="text-center td-qty">
                <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" readonly="True" />
            </td>
        </xpath>
        <xpath expr="//table[@id='cart_products']" position="after">
            <link t-if="not website_sale_order" href="/mcm_website_theme/static/src/css/cart.css" rel="stylesheet" />
            <p id="error_no_date" class="alert alert-warning" style="margin-left:0%;display:none;max-width:600px">
                Pas de date disponible pour le moment.
            </p>
            <t t-foreach="website_sale_order.website_order_line" t-as="line">
                <!-- Mode de financement -->
                <h3 class="" style="margin-top: 1rem; font-weight: 600;font-size:18px" >
                    Sélectionnez votre mode de financement
                </h3>
               
            <select id="financement" onchange="modeFinancement(this.options[this.selectedIndex].id, this.selectedIndex)" style="font-size: 15px; font-weight: 600;" class="form-control search-slt " data-tour="step: 3; title: Mode de financement; content: Sélectionnez le mode de paiement souhaité" >
                <option value="all" id="pm_none" disabled="disabled" selected="selected" hidden="hidden">Cliquez ici 
                </option>
                <option id="stripe_pm" name="pm_method" class="" data-acquirer-id="8" data-form-payment="True" data-provider="stripe_pm" t-att-value="line.name_short" >
                    
                    Carte de crédit | Paiement en une seule fois         
            </option>
            <t t-if="website_sale_order.instalment_number>1 and website_sale_order.pricelist_id.id==1">
                <option id="stripe_pm" name="pm_method" class="" data-acquirer-id="8" data-form-payment="True" data-provider="stripe_pm" t-att-value="line.name_short" >
                    
                    Carte de crédit 
                   
                    
                        | Paiement en
                        <t t-esc="website_sale_order.instalment_number" />
                        fois sans frais
                    
                   
            </option>
        </t>
               <t t-if="line.product_id.product_tmpl_id.cpf_available">
                <option id="cpf_pm" name="pm_method" data-acquirer-id="16" data-form-payment="True" data-provider="transfer" class=""  t-att-value="line.name_short" >CPF</option>
                <option id="pole_emploi_pm" t-att-value="line.name_short">Pôle emploi</option>
               </t>
            </select>
            <br/>
            <p id="error_no_method" class="alert alert-warning" style="margin-left:0%;display:none;max-width:600px">
                Vous devez sélectionner votre mode de financement.
            </p>
        </t>
            
            <!-- <div class="card-body o_payment_acquirer_select " style="padding-bottom: 0px !important;">
                <t t-foreach="website_sale_order.website_order_line" t-as="line">
                    <label for="stripe_pm" class="radio ">
                        <input id="stripe_pm" type="radio" name="pm_method" class="hidden" data-acquirer-id="8" data-form-payment="True" data-provider="stripe_pm" t-att-value="line.name_short" checked="True" t-attf-onclick="onchangeTextButton1()" />
                        <span class="label"></span>
                        Carte de crédit
                        <span class="col-lg-12" ></span>
                        <t t-if="website_sale_order.instalment_number>1 and website_sale_order.pricelist_id.id==1">
                            <p style="font-style: italic;font-size: 12px; margin-bottom: 0rem !important;padding-left: 31px;">
                                <span>Paiement en</span>
                                <span t-field="website_sale_order.instalment_number" />
                                <span>fois sans frais</span>
                            </p>
                        </t>
                    </label>
                    <ul class="list-inline payment_icon_list cpf_position" style="margin-top: 11px;">
                        <li class="list-inline-item">
                            <span data-oe-model="payment.icon" data-oe-id="1" data-oe-field="image_payment_form" data-oe-type="image" data-oe-expression="pm_icon.image_payment_form" data-oe-field-xpath="/t[1]/form[1]/div[1]/t[4]/div[1]/ul[1]/t[2]/li[1]/span[1]">
                                <img src="/web/image/payment.icon/1/image_payment_form/VISA?unique=82297bd" class="img img-fluid img-res" alt="VISA" />
                            </span>
                        </li>
                        <li class="list-inline-item">
                            <span data-oe-model="payment.icon" data-oe-id="2" data-oe-field="image_payment_form" data-oe-type="image" data-oe-expression="pm_icon.image_payment_form" data-oe-field-xpath="/t[1]/form[1]/div[1]/t[4]/div[1]/ul[1]/t[2]/li[1]/span[1]">
                                <img src="/web/image/payment.icon/2/image_payment_form/American%20Express?unique=82297bd" class="img img-fluid img-res" alt="American Express" />
                            </span>
                        </li>
                        <li class="list-inline-item">
                            <span data-oe-model="payment.icon" data-oe-id="7" data-oe-field="image_payment_form" data-oe-type="image" data-oe-expression="pm_icon.image_payment_form" data-oe-field-xpath="/t[1]/form[1]/div[1]/t[4]/div[1]/ul[1]/t[2]/li[1]/span[1]">
                                <img src="/web/image/payment.icon/7/image_payment_form/Maestro?unique=82297bd" class="img img-fluid img-res" alt="Maestro" />
                            </span>
                        </li>
                        <li class="list-inline-item">
                            <span style="margin-right: 12px;" data-oe-model="payment.icon" data-oe-id="8" data-oe-field="image_payment_form" data-oe-type="image" data-oe-expression="pm_icon.image_payment_form" data-oe-field-xpath="/t[1]/form[1]/div[1]/t[4]/div[1]/ul[1]/t[2]/li[1]/span[1]">
                                <img src="/web/image/payment.icon/8/image_payment_form/MasterCard?unique=82297bd" class="img img-fluid img-res" alt="MasterCard" />
                            </span>
                        </li>
                    </ul>
                </t>
            </div> -->

            <!-- <div class="card-body o_payment_acquirer_select cpf_spacing">
                <t t-foreach="website_sale_order.website_order_line" t-as="line">
                    <label for="cpf_pm" class="radio " t-if="line.product_id.product_tmpl_id.cpf_available">
                        <input type="radio" name="pm_method" data-acquirer-id="16" data-form-payment="True" data-provider="transfer" class="hidden" id="cpf_pm" t-att-value="line.name_short" t-attf-onclick="onchangeTextButton()" />
                        <span class="label"></span>
                        CPF
                        <p style="font-style: italic;font-size: 12px; padding: 0.5rem 0rem 0rem 2rem;">
                            Mon Compte personnel de formation
                        </p>
                    </label>

                    <ul class="cpf_position" t-if="line.product_id.product_tmpl_id.cpf_available">
                        <li class="list-inline-item">
                            <span>
                                <img style="max-width: 3rem;" class="img-fluid positioncpf" src="/mcm_website_theme/static/src/img/cpf.png"></img>
                            </span>
                        </li>
                        <li class="list-inline-item">
                            <div class="scroll-prompt" scroll-prompt="" ng-show="showPrompt" style="opacity: 1; margin-top: -38px;">
                                <div class="scroll-prompt-arrow-container hide" id="arrow-down">
                                    <div class="scroll-prompt-arrow">
                                        <div></div>
                                    </div>
                                    <div class="scroll-prompt-arrow">
                                        <div></div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </t>
            </div> -->

            <div id="cpf-details" class="hide">
                <h5 style="
                letter-spacing: 0.5px;
                
                display: inline-block;
                font-size:17px">
                    Vous souhaitez mobiliser votre droit à la formation professionnelle mais vous n'avez pas encore
                    créé votre compte CPF? Voici un tutoriel rapide pour vous guider à vous inscrire:
                </h5>
                <!-- <p style="letter-spacing: 1.5px; text-align: justify;">Salariés, demandeurs d’emploi ou encore travailleurs indépendants ? Vous avez tous droit à la formation professionnelle. D’où la nécessité de la mise en place du Compte personnel de formation (CPF). Besoin de tuto? lancez cette vidéo !</p> -->

                <style>
                    .embed-container { position: relative; margin-top: 2rem; padding-bottom: 56.25%; height: 0;
                    overflow: hidden; max-width: 100%; } .embed-container iframe, .embed-container object,
                    .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
                    .hide-text-top {
                    display: block;
                    }
                    .hide-text-bottom {
                    display: block;
                    }

                    @media screen and (max-width: 1199px) {
                    .hide-text-top {
                    display: none;
                    }
                    }
                    @media screen and (min-width: 1200px) {
                    .hide-text-bottom {
                    display: none;
                    }
                    }
                </style>
                <div class='embed-container mb40'>
                    <iframe id="cpf_video" frameborder='0' allowfullscreen="allow"></iframe>
                </div>
            </div>
            <!-- pole emploie radui button-->
            <!-- <div class="card-body o_payment_acquirer_select cpf_spacing">
                <t t-foreach="website_sale_order.website_order_line" t-as="line">
                    <label for="pole_emploi_checkbox" class="radio" t-if="line.product_id.product_tmpl_id.cpf_available">
                        <input type="radio" name="pm_method" data-acquirer-id="16" data-form-payment="True" data-provider="transfer" class="hidden" id="pole_emploi_checkbox" t-att-value="line.name_short" t-attf-onclick="onchangeTextButton()" />
                        <span class="label"></span>
                        Pôle emploi
                        <p style="font-style: italic;font-size: 12px; padding: 0.5rem 0rem 0rem 2rem;">
                            Financer votre formation avec pôle emploi
                        </p>
                    </label>
                    logo and arrow down pole emploi
                    Ajouter le logo et une phrase descriptive
                    <ul class="cpf_position" t-if="line.product_id.product_tmpl_id.cpf_available">
                        <li class="list-inline-item">
                            <span>
                                <img style="max-width: 3.5rem;" class="img-fluid positioncpf" src="/mcm_website_theme/static/src/img/pole_Emploi.png"></img>
                            </span>
                        </li>
                        <li class="list-inline-item">
                            <div class="scroll-prompt" scroll-prompt="" ng-show="showPrompt" style="opacity: 1; margin-top: -38px;">
                                <div class="scroll-prompt-arrow-container hide" id="arrow-down-pole-emploi">
                                    <div class="scroll-prompt-arrow">
                                        <div></div>
                                    </div>
                                    <div class="scroll-prompt-arrow">
                                        <div></div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </t>
            </div> -->
            <!-- Intégrer la vidéo explicative pour pole emploie-->
            <div id="pole-emploi-details" class="hide">
                <h5 style="
                letter-spacing: 0.5px;
                display: inline-block;
                font-size:17px">
                
                    Vous souhaitez mobiliser un financement pole emploi pour votre formation professionnelle mais vous ne savez pas par ou commencer ? Voici un tutoriel rapide pour vous guider :                
                </h5>
                <!-- <p style="letter-spacing: 1.5px; text-align: justify;">Salariés, demandeurs d’emploi ou encore travailleurs indépendants ? Vous avez tous droit à la formation professionnelle. D’où la nécessité de la mise en place du Compte personnel de formation (CPF). Besoin de tuto? lancez cette vidéo !</p> -->


                <div class='embed-container mb32'>
                    <iframe id="pole_emploi_video" src="https://ayvozlrxtq.cloudimg.io/_cdc_/media/ajarisvideo/public/216676.mp4" style="border:0px #ffffff none;" name="myiFrame" scrolling="no" frameborder="1" marginheight="0px" marginwidth="0px" height="400px" width="600px" allowfullscreen="true"></iframe>
                </div>
            </div>
            <!-- FIN Mode de financement -->
            <!-- <div t-if="request.website.id == 1">
                <script>

                </script>
            </div> -->

        </xpath>
    </template>

    <!-- hide product link -->

    <template id="mcm_website_cart_line_product_link" inherit_id="website_sale.cart_line_product_link">
        <xpath expr="//a" position="replace">
            <a>
                <t t-raw="0" />
            </a>
        </xpath>

    </template>

    <!-- FIN hide product link -->
    <template id="mcm_website_sale_cart_lines_date_and_region" inherit_id="website_sale.cart_lines">
        <xpath expr="//table[@id='cart_products']" position="after">
            <script></script>
            <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
            <input type="hidden" t-att-value='from_bolt' id='from_bolt' />

            <!-- bolt empty cart -->
            <t t-if="cartIsEmpty=='True' and request.website.id == 1">
                <input id="cartIsEmpty" type="hidden" t-att-value="cartIsEmpty" />
                <input id="isSigned" type="hidden" t-att-value="isSigned" />
                <input id="rdvIsBooked" type="hidden" t-att-value="rdvIsBooked" />
                <input id="bolt_contract_uri" type="hidden" t-att-value="bolt_contract_uri" />
                <script src="/mcm_website_theme/static/src/js/empty_cart_popup.js"></script>
                <link rel="stylesheet" href="/mcm_website_theme/static/src/css/popup.css" />

                <div id="popupEmptyCart" class="overlay">
                    <div class="popup">
                        <h2 class="text-left">
                            <i class="fa fa-info-circle" style="color: #111111" />
                        </h2>
                        <a class="close" onclick="closePopup()">
                            <i class="fa fa-times" />
                        </a>
                        <div class="content">
                            <p id="notifMessageBolt" style="text-align: center; font-size: 16px" />
                            <div class="" style="text-align-last: center; margin-block-start: 1.5rem">
                                <div id="default">

                                    <button id="btn-action" class="btn btn-shop">Continuer</button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>

            <!-- bolt empty cart -->
            <div id="popup1" class="overlay_popup  " style="position: fixed !important;">
                <div class="popup" style="top: 20%;z-index:999;    max-height:unset">


                    <h2 class="text-left">
                        <i class="fa fa-info-circle" style="color: #152856;"></i>
                    </h2>
                    <!-- bolt =  false-->
                    <a t-if="from_bolt == 'False'" class="close" href="#" onclick="closepopup()">
                        <i class="fa fa-times"></i>
                    </a>
                    <!-- bolt = true-->
                    <a t-if="from_bolt == 'True' and request.website.id == 1" class="close" href="#" onclick="resetPopupBolt()">
                        <i class="fa fa-times"></i>
                    </a>
                    <a t-if="request.website.id == 2" class="close" href="#" onclick="closepopup()">
                        <i class="fa fa-times"></i>
                    </a>
                    <div class="content" id="popupcontent">
                        <p id="notifMessage">

                            <div class="input checkbox" style="width:90%">
                                <input type="checkbox" id="checkbox_failures" style="white-space: nowrap;" class="text-xl-left border-0" t-att-checked="website_sale_order.failures" t-att-value="website_sale_order.failures">
                                    <label for="failures" style="display:inline">
                                        Je souhaite accéder à la formation dès maintenant sans attendre 14 jours. Je
                                        reconnais que
                                        <span t-if="website_sale_order.company_id.id==2">DIGIMOOV</span>
                                        <span t-if="website_sale_order.company_id.id==1">MCM Academy</span>
                                        procédera à l'exécution immédiate de ma formation en ligne et à ce titre, je
                                        renonce expressément à exercer mon droit de rétractation conformément aux
                                        dispositions de
                                        l'article L.221-28 1° du code de la consommation.
                                    </label>
                                </input>
                            </div>

                            <div class="input checkbox" id="input_lourd" style="display:none;margin-top: 12px;">
                                <input type="checkbox" id="checkbox_lourd" style="white-space: nowrap;" class="text-xl-left border-0" t-att-checked="website_sale_order.conditions" t-att-value="website_sale_order.conditions">
                                    <label for="conditions" style="display:inline">
                                        Je m'engage à régler le montant de reste à charge de
                                        <b>190€</b>
                                        une fois mon financement CPF de
                                        <b>2000€</b>
                                        accepté
                                    </label>
                                </input>

                            </div>

                            <div class="input checkbox" style="margin-top: 12px;">
                                <input type="checkbox" id="checkbox_conditions" style="white-space: nowrap;" class="text-xl-left border-0" t-att-checked="website_sale_order.conditions" t-att-value="website_sale_order.conditions">
                                    <label for="conditions" style="display:inline">
                                        J'ai lu et j'accepte les
                                        <a href="/conditions" target="blank" style="font-weight: 600; color: #000;">
                                            conditions générales de vente
                                        </a>
                                    </label>
                                </input>

                            </div>

                            <p id="error_conditions" class="alert alert-warning" style="margin-left:0%;display:none;">
                                Vous devez acceptez les conditions générales de ventes
                            </p>

                            <p id="error_choix_date_popup" class="alert alert-warning" style="margin-left:0%;display:none;max-width:600px">
                                Vous devez fermer cette fenêtre et selectionner votre date d'examen
                            </p>
                        </p>
                        
                        <div style="text-align:center">
                            <button type="button" class="btn btn-shop  shake" id="continueBtn" onclick="verify_payment_method()">Continuer
                            </button>
                        </div>

                        <!-- <div t-if="from_bolt" style="text-align:center">
                            <button type="button" class="btn btn-secondary action-button shake" id="continueBtn" onclick="addcheckBoxBolt()">Continuer
                            </button>
                        </div> -->
                    </div>
                </div>
            </div>
            <!-- Tour guide css-->
            <link href="/mcm_website_theme/static/src/css/tourguide.css " rel="stylesheet" type="text/css" />
            <!-- SPINNER FOR LOADING SCREEN-->
           <style>

            #cover-spin {
                position:fixed;
                width:100%;
                left:0;right:0;top:0;bottom:0;
                background-color: rgb(0 0 0 / 73%);
                z-index:9999;
               
            }
            
            @-webkit-keyframes spin {
                from {-webkit-transform:rotate(0deg);}
                to {-webkit-transform:rotate(360deg);}
            }
            
            @keyframes spin {
                from {transform:rotate(0deg);}
                to {transform:rotate(360deg);}
            }
            
            #cover-spin::after {
                content:'';
                display:block;
                position:absolute;
                left:48%;top:40%;
                width:40px;height:40px;
                border-style:solid;
                border-color: white;
                border-top-color:transparent;
                border-width: 4px;
                border-radius:50%;
                -webkit-animation: spin .8s linear infinite;
                animation: spin .8s linear infinite;
            }
              

        </style>
        <div id="cover-spin"></div>
           <!-- End SPINNER -->
          
        
            <div style="margin:auto;background-color:#fff;border-color:#585959;" t-if="request.website.is_public_user()==False and modules_mcm" id="region_date_examen">

                <h3 t-if="modules_mcm" class="" style="margin-top: 1rem; font-weight: 600;;font-size:18px" >
                    Sélectionnez votre région d'examen
                </h3>

                <!-- state from backend-->
                <input id="state" type="hidden" t-att-value="state" />
                <p t-if="modules_mcm">
                    <b>
                        <div style="margin-left:0%;" id="exam_center">
                            
                            <select name="region_examen" id="region_examen" class="form-control search-slt " style="font-size: 15px;font-weight: 600;"  t-if="modules_mcm" onclick="showDepartement()" data-tour="step: 1; title: Région d'examen; content: Vous commencez par choisir votre région">
                                <option value="all" id="all" disabled="disabled" selected="selected" hidden="hidden">Cliquez ici 
                                </option>
                                <t t-if="from_bolt == 'False'">
                                    <t t-foreach="list_villes_mcm" t-as="ville">
                                        <t t-if="ville">
                                            <b>
                                                <option t-att-value="ville.name_ville">
                                                    <t t-esc="ville.name_ville" />
                                                </option>
                                            </b>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="from_bolt == 'True'">
                                    <t t-foreach="list_villes_mcm" t-as="ville">
                                        <t t-if="ville and ville.name_ville=='Île-de-France'">
                                            <b>
                                                <option t-att-value="ville.name_ville">
                                                    <t t-esc="ville.name_ville" />
                                                </option>
                                            </b>
                                        </t>
                                    </t>
                                </t>
                            </select>
                            <p id="error_choix_region_examen" class="alert alert-warning" style="margin-top:10px; margin-left:0%; display:none; max-width:600px;">
                                Vous devez sélectionner votre région d'examen
                            </p>

                          
                            <t t-if="is_taxi == 'True'  "  >
                                <h3 t-if="modules_mcm" class="" style="margin-top: 1rem; font-weight: 600;font-size:18px" >
                                    Sélectionnez votre département
                                </h3>
                                
                              
                                <select name="departement_examen" id="departement_examen" class="form-control search-slt "   style="font-size: 15px; font-weight: 600;" t-if="modules_mcm" data-tour="step: 2; title: Département d'examen; content: Une fois que vous avez choisi votre région, vous devez choisir votre  département d'examen.">
                                    <option value="all" id="all" disabled="disabled" selected="selected" hidden="hidden">
                                        Cliquez ici 

                                    </option>
                                
                                        
                                </select>
                                <select name="departement_examen_data" id="departement_examen_data"  t-if="modules_mcm" style="display:none; " >
                                    <option value="all" id="all"> Cliquez ici 
                                    </option>
                                
                                        <t t-foreach="france_departments" t-as="departement">
                                            <t t-if="departement">
                                                <b>
                                                    <option t-att-value="departement.session_ville_id.name_ville" t-att-id="departement.id">
                                                        <t t-esc="departement.name" />
                                                    </option>
                                                </b>
                                            </t>
                                         </t>
                                </select>
                                <p id="error_choix_departement" class="alert alert-warning" style="margin-top:10px; margin-left:0%; display:none;">
                                    Vous devez sélectionner votre département d'examen
                                </p>
                            </t>
                            
                            <!-- <p t-if="website_sale_order.exam_center_error != ''" id="error_exam_center" class="alert alert-warning" style="margin-left:0%;display:inline-block;">
                                Vous devez Selectionnez une Région
                            </p> -->
                        </div>
                    </b>
                </p>
               

                <p t-if="modules_mcm">
                    <b>
                        <div style="margin-left:0%; display:none">
                            <select id="exam_date" class="form-control search-slt  " t-if="modules_mcm" style="display:none;font-size: 15px; font-weight: 600;" >
                                <option value="all" disabled="disabled" selected="selected" hidden="hidden" id="all">Cliquez ici 
                                </option>
                                <t t-foreach="modules_mcm" t-as="module">
                                    <t t-if="module">
                                        <t t-if="module.session_id.website_published==True">
                                            <b>
                                                <option t-att-value="module.session_ville_id.name_ville" t-att-id="module.id">
                                                    <t t-esc="module.date_exam.strftime('%d %B %Y')" />
                                                </option>
                                            </b>
                                        </t>
                                    </t>
                                </t>
                            </select>
                            <!-- <p t-if="website_sale_order.exam_date_error != ''" id="error_exam_date" class="alert alert-warning" style="margin-left:0%;display:inline-block;">
                                Vous devez Selectionnez une date
                            </p> -->
                        </div>
                        <h3 t-if="modules_mcm" class="" style="margin-top: 1rem; font-weight: 600;;font-size:18px" >
                            Sélectionnez votre date d'examen
                        </h3>
                        <div id="select-date" style="margin-left: 0%">
                            
                            <select name="date_examen" id="options-date" class="form-control search-slt " style="font-size: 15px; font-weight: 600;"  data-tour="step: 3; title: Date d'examen ; content: Maintenant, choisissez votre date d'examen.">
                                <option value="all" disabled="disabled" selected="selected" hidden="hidden" id="all">
                                    Cliquez ici 
                                </option>
                            </select>
                        </div>
                        <p id="error_choix_date" class="alert alert-warning" style="margin-top:10px; margin-left:0%; display:none;max-width:600px">
                            Vous devez sélectionner votre date d'examen
                        </p>
                    </b>
                </p>

            </div>

        </xpath>
    </template>

    <template id="mcm_website_sale_short_cart_summary" inherit_id="website_sale.short_cart_summary">
        <xpath expr="//a[@class='btn btn-secondary float-right d-none d-xl-inline-block']" position="replace">
            <button role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-shop float-right d-none d-xl-inline-block disabled" id="pm_shop_checkout" onclick="showPopup()" >
                <span id="pm_shop_checkout_text">Je paye maintenant !</span>
            </button>
        </xpath>
    </template>
 

    <template id="mcm_website_sale_product_quantity" inherit_id="website_sale.product_quantity">
        <xpath expr="//div[@class='css_quantity input-group']" position="replace"></xpath>
    </template>

    <template id="mcm_website_sale_products_add_to_cart" inherit_id="website_sale.products_add_to_cart">
        <xpath expr="//t[@t-if='product_variant_id']" position="replace">
            <t t-if="product_variant_id">
                <a t-if="request.website.is_public_user()==False" href="#" role="button" class="btn btn-shop a-submit" aria-label="Shopping cart" title="Shopping cart">
                    <span class="fa fa-shopping-cart" />
                </a>
            </t>
        </xpath>
    </template>

    <template id="mcm_website_sale_products_add_to_cart" inherit_id="website_sale.products_add_to_cart">
        <xpath expr="//t[@t-if='product_variant_id']" position="replace">
            <t t-if="product_variant_id">
                <a t-if="request.website.is_public_user()==False" href="#" role="button" class="btn btn-shop a-submit" aria-label="Shopping cart" title="Shopping cart">
                    <span class="fa fa-shopping-cart" />
                </a>
            </t>
        </xpath>
    </template>

    <!-- /shop/confirmation -->
    <template id="mcm_website_sale_confirmation" inherit_id="website_sale.confirmation">
        <xpath expr="//h1" position="replace">
            <t t-if="order.state in ('sent','sale') and order.company_id.id ==2">
                <h1>
                    <span>Contrat</span>
                    <em t-field="order.partner_id.name" />
                    <t t-if="order.state == 'sale'">
                        <span>Confirmed</span>
                    </t>
                </h1>
            </t>
        </xpath>

        <!--   <xpath expr="//h3" position="replace">
            <t t-if="order.company_id.id ==2">
                <h3 class="text-left mt-3">
                    <strong>Payment Information:</strong>
                </h3>
            </t>
        </xpath> -->

        <xpath expr="//div[hasclass('thanks_msg')]" position="replace">
            <div class="thanks_msg">
                <form action="/contrat">
                    <h2>
                        <span t-if="order.company_id.id ==2">
                            Merci pour votre paiement.
                        </span>
                        <div t-if="order.company_id.id ==2">
                            <a role="button" class="btn btn-primary d-none d-md-inline-block" href="/shop/print" target="_blank" rel="noopener" aria-label="Print" title="Print">
                                <i class="fa fa-print"></i>
                                Imprimer
                            </a>
                        </div>
                        <!--  <button type="submit" class="btn btn-primary d-none d-md-inline-block" t-attf-href="'/my/orders/%s?access_token=%s' % (order.id,order.access_token)" title="Contrat"> -->
                        <div t-if="order.company_id.id ==1">
                            <button type="submit" class="btn btn-primary d-none d-md-inline-block" title="Contrat">
                                Continuer
                            </button>
                        </div>
                    </h2>
                </form>
            </div>

        </xpath>
        <xpath expr="//p[@class='alert alert-info mt-3']" position="replace">
            <p class="alert alert-info mt-3" role="status">
                <a role="button" t-att-href='order.partner_id.signup_prepare() and order.partner_id.with_context(relative_url=True).signup_url' class='btn btn-primary'>S'inscrire
                </a>
                pour suivre votre contrat
            </p>
        </xpath>
        <xpath expr="//div[hasclass('oe_cart')]//t[4]" position="replace">
            <t t-set="tx" t-value="order.get_portal_last_transaction()" />
            <t t-if="tx.state=='error'">
                <div class="alert alert-danger alert-dismissable">
                    <span>Paiement échoué :</span>
                    <span t-raw="tx.state_message" />
                    <span>Essayez de nouveau</span>
                </div>
            </t>
            <t t-else="">
                <t t-call="website_sale.payment_confirmation_status" />
            </t>
        </xpath>
    </template>

    <template id="mcm_website_sale_cart_total_script" inherit_id="website_sale.total">
        <xpath expr="//div[@id='cart_total']" position="inside">


            <div t-if="request.website.id==1">


                <!-- <script type="text/javascript" src="/mcm_website_theme/static/src/js/template.js"></script> -->
            </div>


        </xpath>
    </template>


    <template id="mcm_website_sale_cart_script" inherit_id="website_sale.cart">
        <xpath expr="//div[@id='wrap']" position="before">
            <t t-set="head">
                <meta name="robots" content="noindex" />
            </t>
        </xpath>
        <xpath expr="//div[@id='wrap']" position="after">
              <!-- JS assets at the end of code-->
            <script  type="text/javascript" src="/mcm_website_theme/static/src/js/tourguide.min.js" ></script>
            <script>
                var tourguide = new Tourguide({
     
                  
                  
                  });
            </script>
             <!-- JS assets at the end of code-->
        </xpath>
        <!-- hide the second button return to shop on bottom-->
        <xpath expr="//a[@class='btn btn-secondary mb32']" position="replace"></xpath>
        <xpath expr="//a[@class='btn btn-primary float-right']" position="replace">

            <button role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-shop float-right disabled" id="pm_shop_checkout2" onclick="showPopup()" data-tour="step: 4; title: Payement; content: Vous pouvez maintenant procéder au paiement en cliquant sur le bouton Je paye maintenant !">
                <span id="pm_shop_checkout_text">Je paye maintenant !</span>
            </button>
        </xpath>
        <xpath expr="//a[@class='btn btn-primary float-right d-none d-xl-inline-block']" position="replace">
            <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn  btn-shop float-right d-none d-xl-inline-block" onclick="verify_payment_method()" href="" id="pm_shop_check">
                <span id="pm_shop_check_text">Je paye maintenant !</span>
                <span class="fa fa-chevron-right" />
            </a>
        </xpath>

    </template>
    <template id="mcm_website_sale_header" inherit_id="website_sale.header">
        <xpath expr="//a[@href='/shop/cart']" position="replace">
            <a href="/shop/cart" class="nav-link" t-if="website_sale_order and website_sale_order.cart_quantity">
                <i class="fa fa-shopping-cart" />
                Mon Panier
                <sup t-attf-class="my_cart_quantity badge badge-primary" t-esc="website_sale_order and website_sale_order.cart_quantity or ''" t-att-data-order-id="website_sale_order and website_sale_order.id or ''" />
            </a>
        </xpath>
    </template>

    <template id="mcm_reduction_code" inherit_id="website_sale.reduction_code" customize_show="True" name="Promo Code">
        <xpath expr="//a[hasclass('show_coupon')]" position="replace">
            <a href="#" class="show_coupon"  id="promo_code" style="display:inline;color: var(--blue-shop); font-weight:700 ">J'ai
                un code promo
            </a>
        </xpath>
    </template>

    <template id="mcm_coupon_form" inherit_id="website_sale.coupon_form" name='Coupon form'>
        <xpath expr="//input[@name='promo']" position="replace">
            <input name="promo" class="form-control" type="text" placeholder="code..." id="promo_input" style="display:inline; height:40px" t-att-value="website_sale_order.pricelist_id.code or None" />
        </xpath>
        <xpath expr="//div[hasclass('input-group-append')]" position="replace">
            <div class="input-group-append" id="promo_button" style="display:inline;">
                <a href="#" role="button" class="btn btn-shop a-submit" style="    padding: 7px 21px;">
                    Appliquer
                </a>
            </div>
        </xpath>
    </template>

    <template id="mcm_website_address" inherit_id="website_sale.address">
        <xpath expr="//div[hasclass('form-row')]//div[1]" position="after">
            <div t-attf-class="form-group col-lg-12 " t-if="website_sale_order.company_id.id==1">
                <label class="col-form-label" for="name">Numéro de permis</label>
                <input type="text" name="numero_permis" id="numero_permis" required="required" t-attf-class="form-control #{error.get('numero_permis') and 'is-invalid' or ''}" t-att-value="'numero_permis' in checkout and checkout['numero_permis']" />
            </div>
        </xpath>
        <xpath expr="//div[hasclass('form-row')]//div[4]" position="after">
            <div class="form-group col-lg-12">
                <label class="col-form-label" for="adresse_facturation">Adresse de facturation</label>
                <input type="radio" name="adresse_facturation" id="particulier" t-att-value="'addresse_facturation' in checkout and checkout['addresse_facturation'] or 'particulier'" t-att-checked="fact=='particulier'" onclick="hide_company()">
                    <span>
                        Particulier
                    </span>
                </input>
                <input type="radio" name="adresse_facturation" id="company" t-att-value="'addresse_facturation' in checkout and checkout['addresse_facturation'] or 'societe'" t-att-checked="fact=='societe'" onclick="show_company()">
                    <span>
                        Société
                    </span>
                </input>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('form-row')]//t[2]" position="replace">
            <div t-attf-class="form-group #{error.get('company_name') and 'o_has_error' or ''} col-lg-6" style="display:none;" id="t_company">
                <label class="col-form-label font-weight-normal label-optional" for="company_name">Nom de la société
                </label>
                <input type="text" name="company_name" t-attf-class="form-control #{error.get('company_name') and 'is-invalid' or ''}" t-att-value="'commercial_company_name' in checkout and checkout['commercial_company_name'] or 'company_name' in checkout and checkout['company_name']" t-att-title="'Changing company name is not allowed once document(s) have been issued for your account.'" />
            </div>
            <div t-attf-class="form-group #{error.get('siret') and 'o_has_error' or ''} col-lg-6 div_siret" style="display:none;" id="t_company_siret">
                <label class="col-form-label font-weight-normal label-optional" for="siret">SIRET</label>
                <input type="text" name="siret" t-attf-class="form-control #{error.get('siret') and 'is-invalid' or ''}" t-att-value="'siret' in checkout and checkout['siret']" t-att-title="'Changing siret number is not allowed once document(s) have been issued for your account.'" />
            </div>
        </xpath>

        <xpath expr="//div[@id='wrap']" position="inside">
            <script>
                function hide_company(){
                document.getElementById("t_company").style.display = 'none';
                document.getElementById("t_company_siret").style.display = 'none';
                };
                function show_company(){
                document.getElementById("t_company").style.display = 'inline';
                document.getElementById("t_company_siret").style.display = 'inline';
                };
            </script>
        </xpath>
        <xpath expr="//label[@for='name']" position="replace">
            <label class="col-form-label" for="name">Nom &amp; prénom Stagiaire</label>
        </xpath>
        <xpath expr="//label[@for='street']" position="replace">
            <label class="col-form-label" for="street">
                <span class="d-md-inline">Adresse</span>
            </label>
        </xpath>
        <xpath expr="//label[@for='zip']" position="replace">
            <label class="col-form-label" for="zip">
                <span class="d-md-inline">Code postale</span>
            </label>
        </xpath>
        <xpath expr="//label[@for='street2']" position="replace"></xpath>
        <xpath expr="//input[@name='street2']" position="replace"></xpath>
    </template>

    <template id="popup_shop_cart" inherit_id="website_sale.cart">
        <xpath expr="//div[@id='wrap']" position="before">
           
      
        </xpath>

    </template>


</odoo>