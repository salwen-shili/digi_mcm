$(document).ready(function(){function e(e,i){if(i.length>0){const n=/^[A-Z,a-z,À-ÿ '-]{2,}$/;return!i.match(n)&&`Votre ${e} doit contenir des lettres seulement!`}return"Ce champs est obligatoire!"}function i(e,i){if(i.length>0){const e=/^(07|06)[0-9]\d{7}$/;return!i.match(e)&&"Votre numéro de téléphone doit commencer par 06 ou 07 suivie par 8 chiffres"}return"Ce champs est obligatoire!"}function n(e,i){const n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;e.length>0?e.match(n)?($("#email_container ").removeClass("error-input-field"),$("#email_helper ").append("")):($("#email_container ").addClass("error-input-field"),$("#email_helper span ").text("Votre email est incorrecte!")):($("#email_container ").addClass("error-input-field"),$("#email_helper span ").text("Ce champs est obligatoire!")),i.length>0?i.match(n)?($("#confirm_email_container ").removeClass("error-input-field"),$("#confirm_email_helper ").append("")):($("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("Votre email est incorrecte!")):($("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("Ce champs est obligatoire!")),e.length>0&&i.length>0&&(e===i?i.match(n)&&($("#email_container ").removeClass("error-input-field"),$("#email_helper ").append(""),$("#confirm_email_container ").removeClass("error-input-field"),$("#confirm_email_helper ").append("")):($("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("L'email ne correspond pas au champs precedent! Veuillez confirmer votre email.")))}function r(e){if(e.length>0){if(e.length<8)return"Votre mot de passe doit contenir au minimum 8 caractères";{const i=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!/+/='":;(){}[|@$ %^&*-]).{8,}$/;return!e.match(i)&&"Votre mot de passe doit contenir une combinaison de chiffres, caractères spéciaux, lettres majuscules et minuscules!"}}return"Ce champs est obligatoire!"}function t(e){const i=Object.keys(e).map((i,n)=>e[i]);for(let e=0;e<i.length;e++)if(!1===i[e])return!1;return!0}$(".progress-bar").css("width","25%");var a={firstname_valid:!1,lastname_valid:!1,phone_valid:!1,email:!1,confirmemail_valid:!1,password_valid:!1};document.getElementById("inscrire");$("#lastname").keyup(function(i){const n=$("#lastname").val(),r=e("nom",n);!1===r?(a.lastname_valid=!0,t(a),$("#lastname_container ").removeClass("error-input-field"),$("#lastname_helper ").append("")):(a.lastname_valid=!1,$("#lastname_container ").addClass("error-input-field"),$("#lastname_helper span ").text(r))}),$("#firstname").keyup(function(i){const n=$("#firstname").val(),r=e("prenom",n);!1===r?(a.firstname_valid=!0,t(a),$("#firstname_container ").removeClass("error-input-field"),$("#firstname_helper ").append("")):(a.firstname_valid=!1,$("#firstname_container ").addClass("error-input-field"),$("#firstname_helper span ").text(r))}),$("#phone").keyup(function(e){const n=$("#phone").val(),r=i("numero de téléphone",n);!1===r?(a.phone_valid=!0,t(a),$("#phone_container ").removeClass("error-input-field"),$("#phone_helper ").append("")):(a.phone_valid=!1,$("#phone_container ").addClass("error-input-field"),$("#phone_helper span ").text(r))}),$("#email").keyup(function(e){const i=$("#email").val(),r=$("#confirm_email").val();n(i,r)}),$("#confirm_email").keyup(function(e){const i=$("#email").val(),r=$("#confirm_email").val();n(i,r)}),$("#password").keyup(function(e){const i=$("#password").val(),n=r(i);!1===n?(a.password_valid=!0,t(a),$("#password_container ").removeClass("error-input-field"),$("#password_helper ").append("")):(a.password_valid=!1,$("#password_container ").addClass("error-input-field"),$("#password_helper span ").text(n))});const o="https://geo.api.gouv.fr/communes?codePostal=",l="&format=json";let s=!1,d=$("#zipcode"),c=$("#city"),m=$("#voie"),p=($("#voie"),$("#nom_voie"),$("#introuvable"));$(p).click(function(){s=!s,s&&($("#nom_voie_container").html('<input type="text" name="nom_voie" id="nom_voie" class="outlined-text-field"  value="" required="required" inputmode="latin" autocomplete="off"  />\n                      <label for="nom_voie">Nom de voie *</label>\n                      <i class="material-icons error-icon">error_outline</i>\n                      <div class="helper-text bg-c " id="nom_voie_helper">\n                        <span></span>\n                      </div>'),$("#voie_container").html(' <input type="text" id="voie" class="outlined-text-field" value="" required="required" autocomplete="off" inputmode="latin"  />\n                      <label for="voie">Type de voie *</label>\n                      <i class="material-icons error-icon">error_outline</i>\n                      <div class="helper-text bg-c " id="voie_helper">\n                        <span></span>\n                      </div> '));const e=["lastname","firstname","phone","address","email","confirm_email","password","zipcode","city","voie","voie_input","nom_voie","num_voie","comp_address"];e.map(e=>{$(`#${e}`).focusin(function(){$(`#${e} ~ label`).animate({fontSize:"0.8rem",top:"-0.7rem",padding:"0.25rem"},80)}),$(`#${e}`).focusout(function(){""===$(this).val()&&$(`#${e} ~ label`).animate({fontSize:"1rem",top:"1rem",padding:0},80)})})}),$(d).on("blur",function(){var e=$(this).val();let i=o+e+l;fetch(i,{method:"get"}).then(e=>e.json()).then(e=>{$(c).find("option").remove(),e.length?($("#city_container ").removeClass("error-input-field"),$("#city ").removeClass("error-input-field"),$("#city_helper ").append(""),$("#city_container").removeAttr("aria-disabled"),$(c).removeAttr("disabled"),$(m).removeAttr("disabled"),$(c).focus(),$.each(e,function(e,i){$(c).removeAttr("disbaled"),$(c).append('<option value="'+i.nom+'">'+i.nom+"</option>")})):$(d).val()?($("#city_container").attr('aria-disabled="true"'),$(c).attr('disbaled="disabled"'),$(voie_container).attr('disbaled="disabled"'),$(m).attr('disbaled="disabled"'),$("#city_container ").addClass("error-input-field"),$("#city ").addClass("error-input-field"),$("#city_helper span").text("Aucune commmune avec ce code postal.")):($("#city_container ").removeClass("error-input-field"),$("#city ").removeClass("error-input-field"),$("#city_helper ").append(""),$("#city_container").removeAttr('aria-disabled="true"'),$(c).removeAttr('disbaled="disabled"'),$(voie_container).removeAttr('disbaled="disabled"'),$(m).removeAttr('disbaled="disabled"'))}).catch(e=>{$(c).find("option").remove()})}),$("#first_form").submit(function(e){const i=document.querySelector(".error-input-field");null==i||e.preventDefault()})});