$(document).ready(function(){$(".progress-bar").css("width","25%");var e={firstname_valid:!1,lastname_valid:!1,phone_valid:!1,email:!1,confirmemail_valid:!1,password_valid:!1};document.getElementById("inscrire");function i(e,i){if(i.length>0){const n=/^[A-Z,a-z,À-ÿ '-]{2,}$/;return!i.match(n)&&`Votre ${e} doit contenir des lettres seulement!`}return"Ce champs est obligatoire!"}function n(e,i){const n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;e.length>0?e.match(n)?($("#email_container ").removeClass("error-input-field"),$("#email_helper ").append("")):($("#email_container ").addClass("error-input-field"),$("#email_helper span ").text("Votre email est incorrecte!")):($("#email_container ").addClass("error-input-field"),$("#email_helper span ").text("Ce champs est obligatoire!")),i.length>0?i.match(n)?($("#confirm_email_container ").removeClass("error-input-field"),$("#confirm_email_helper ").append("")):($("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("Votre email est incorrecte!")):($("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("Ce champs est obligatoire!")),e.length>0&&i.length>0&&(e===i?i.match(n)&&($("#email_container ").removeClass("error-input-field"),$("#email_helper ").append(""),$("#confirm_email_container ").removeClass("error-input-field"),$("#confirm_email_helper ").append("")):(console.log("email !== confirm_email"),console.log(e,"  ",i),$("#confirm_email_container ").addClass("error-input-field"),$("#confirm_email_helper span ").text("L'email ne correspond pas au champs precedent! Veuillez confirmer votre email.")))}function t(e){const i=Object.keys(e).map((i,n)=>e[i]);for(let e=0;e<i.length;e++)if(!1===i[e])return!1;return!0}$("#lastname").keyup(function(n){const a=i("nom",$("#lastname").val());!1===a?(e.lastname_valid=!0,t(e),$("#lastname_container ").removeClass("error-input-field"),$("#lastname_helper ").append("")):(e.lastname_valid=!1,$("#lastname_container ").addClass("error-input-field"),$("#lastname_helper span ").text(a))}),$("#firstname").keyup(function(n){const a=i("prenom",$("#firstname").val());!1===a?(e.firstname_valid=!0,t(e),$("#firstname_container ").removeClass("error-input-field"),$("#firstname_helper ").append("")):(e.firstname_valid=!1,$("#firstname_container ").addClass("error-input-field"),$("#firstname_helper span ").text(a))}),$("#phone").keyup(function(i){const n=function(e,i){if(i.length>0){const e=/^(07|06)[0-9]\d{7}$/;return!i.match(e)&&"Votre numéro de téléphone doit commencer par 06 ou 07 suivie par 8 chiffres"}return"Ce champs est obligatoire!"}(0,$("#phone").val());!1===n?(e.phone_valid=!0,t(e),$("#phone_container ").removeClass("error-input-field"),$("#phone_helper ").append("")):(e.phone_valid=!1,$("#phone_container ").addClass("error-input-field"),$("#phone_helper span ").text(n))}),$("#email").keyup(function(e){n($("#email").val(),$("#confirm_email").val())}),$("#confirm_email").keyup(function(e){n($("#email").val(),$("#confirm_email").val())}),$("#password").keyup(function(i){const n=function(e){if(e.length>0){if(e.length<8)return"Votre mot de passe doit contenir au minimum 8 caractères";{const i=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!/+/='":;(){}[|@$ %^&*-]).{8,}$/;return!e.match(i)&&"Votre mot de passe doit contenir une combinaison de chiffres, caractères spéciaux, lettres majuscules et minuscules!"}}return"Ce champs est obligatoire!"}($("#password").val());!1===n?(e.password_valid=!0,t(e),$("#password_container ").removeClass("error-input-field"),$("#password_helper ").append("")):(e.password_valid=!1,$("#password_container ").addClass("error-input-field"),$("#password_helper span ").text(n))});let a=!1,r=$("#zipcode"),o=$("#city"),l=$("#voie"),s=($("#voie"),$("#nom_voie"),$("#introuvable"));$(s).click(function(){(a=!a)&&($("#nom_voie_container").html('<input type="text" name="nom_voie" id="nom_voie" class="outlined-text-field"  value="" required="required" inputmode="latin" autocomplete="off"  />\n                      <label for="nom_voie">Nom de voie *</label>\n                      <i class="material-icons error-icon">error_outline</i>\n                      <div class="helper-text bg-c " id="nom_voie_helper">\n                        <span></span>\n                      </div>'),$("#voie_container").html(' <input type="text" id="voie" class="outlined-text-field" value="" required="required" autocomplete="off" inputmode="latin"  />\n                      <label for="voie">Type de voie *</label>\n                      <i class="material-icons error-icon">error_outline</i>\n                      <div class="helper-text bg-c " id="voie_helper">\n                        <span></span>\n                      </div> '));["lastname","firstname","phone","address","email","confirm_email","password","zipcode","city","voie","voie_input","nom_voie","num_voie","comp_address"].map(e=>{$(`#${e}`).focusin(function(){$(`#${e} ~ label`).animate({fontSize:"0.8rem",top:"-0.7rem",padding:"0.25rem"},80)}),$(`#${e}`).focusout(function(){""===$(this).val()&&$(`#${e} ~ label`).animate({fontSize:"1rem",top:"1rem",padding:0},80)})})}),$(r).on("blur",function(){var e=$(this).val();fetch("https://geo.api.gouv.fr/communes?codePostal="+e+"&format=json",{method:"get"}).then(e=>e.json()).then(e=>{$(o).find("option").remove(),e.length?($("#city_container ").removeClass("error-input-field"),$("#city ").removeClass("error-input-field"),$("#city_helper ").append(""),$("#city_container").removeAttr("aria-disabled"),$(o).removeAttr("disabled"),$(l).removeAttr("disabled"),$(o).focus(),$.each(e,function(e,i){$(o).removeAttr("disbaled"),$(o).append('<option value="'+i.nom+'">'+i.nom+"</option>")})):$(r).val()?($("#city_container").attr('aria-disabled="true"'),$(o).attr('disbaled="disabled"'),$(voie_container).attr('disbaled="disabled"'),$(l).attr('disbaled="disabled"'),$("#city_container ").addClass("error-input-field"),$("#city ").addClass("error-input-field"),$("#city_helper span").text("Aucune commmune avec ce code postal.")):($("#city_container ").removeClass("error-input-field"),$("#city ").removeClass("error-input-field"),$("#city_helper ").append(""),$("#city_container").removeAttr('aria-disabled="true"'),$(o).removeAttr('disbaled="disabled"'),$(voie_container).removeAttr('disbaled="disabled"'),$(l).removeAttr('disbaled="disabled"'))}).catch(e=>{$(o).find("option").remove()})}),$("#first_form").submit(function(e){var i,n,t,a,r,o,l;null==document.querySelector(".error-input-field")?(i=window,n=document,t="script",i[a="uetq"]=i[a]||[],r=function(){var e={ti:document.getElementById("microsoft_tracking_key").value};e.q=i[a],i[a]=new UET(e),i[a].push("pageLoad")},(o=n.createElement(t)).src="//bat.bing.com/bat.js",o.async=1,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(r(),o.onload=o.onreadystatechange=null)},(l=n.getElementsByTagName(t)[0]).parentNode.insertBefore(o,l),console.log("inside script"),window.uetq=window.uetq||[],window.uetq.push("event","click sur inscription a partir de vous n'avez pas de compte",{event_category:"Inscription",event_label:"Inscription",event_value:"10"})):e.preventDefault()})});