<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="mcm_contact_document_charger_mes_documents" name="Charger mes documents| Digimoov">
        <t t-call="website.layout">
            <t t-set="additional_title">Charger mes documents| Digimoov</t>
            <div id="wrap" class="oe_structure oe_empt">
                <div class="container">
                    <div class="row">
                        <div class="row m-0">
                            <div class="col-lg-6">
                                <div class="card-shadow ">
                                    <img src="/mcm_contact_documents/static/img/3 Dossier d'insciption Digimoov.webp"
                                         class="img-responsive img img-fluid"
                                         data-original-title="" title="" aria-describedby="tooltip508208"/>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="contact-box ">
                                    <center>
                                        <span style="font-size: 28px;">CHARGER MES DOCUMENTS</span>
                                        <div class="oe_blockui_spin" id ="spin_load_form" position="center"  style="height: 120px">
                                             <p align="center" >
                                                 <img src="/mcm_contact_documents/static/img/spinn.jpg" style="animation: fa-spin 5s infinite steps(12); height: 50px "  alt="Chargement..."/>
                                                 <p style="height: 6px" position = "right"> Chargement ...</p>
                                             </p>
                                        </div>
                                    </center>
                                    <form action="/upload_my_files" method="post" id="digimoov_my_documents_form"
                                          class="s_website_form container-fluid mt32" enctype="multipart/form-data"
                                          data-model_name="partner.document"
                                          data-success_page="/submitted_documents" data-editable-form="false"
                                          hide-change-model="true">
                                        <div class="form-group row form-field o_website_form_required">
                                            <div class="col-lg-12 col-md-12">
                                                <label class="col-form-label">Pièce d'identité recto/verso</label>
                                            </div>
                                            <div class="col-lg-9 col-md-9">
                                                <label class="col-form-label" for="identity" style="font-weight:normal">Charger la piéce d'identité recto : (*.jpg,*.png,*.pdf)
                                                </label>
                                            </div>
                                            <div class="col-lg-9 col-md-12 col-sm-12">
                                                <field name="carte_identiterecto" invisible="0" />
                                                <input type="file" name="identity" required="1" id="identity" filename="carte_identiterecto"
                                                       placeholder="Veuillez Charger 1 fichier Recto verso ou 2 fichiers "
                                                       class="form-control o_website_form_input" string="format documents supportés: *jpg,*.png,*.pdf"
                                                       accept="image/*,application/pdf" help ="format documents supportés: *jpg,*.png,*.pdf"/>
                                            </div>
                                        </div>
                                        <div class="form-group row form-field o_website_form_required">
                                            <div class="col-lg-9 col-md-9">
                                                <label class="col-form-label" for="identity2" style="font-weight:normal" >Charger la piéce d'identité verso : (*.jpg,*.png,*.pdf)
                                                </label>
                                            </div>
                                            <div class="col-lg-9 col-md-12 col-sm-12">
                                                <field name="carte_identiteverso" invisible="1" />
                                                <input type="file" name="identity2" required="1" id="identity2" filename="carte_identiteverso"
                                                       placeholder="Veuillez Charger 1 fichier Recto verso ou 2 fichiers "
                                                       class="form-control o_website_form_input" string="format documents supportés: *jpg,*.png,*.pdf" help ='format documents supportés: *jpg,*.png,*.pdf'
                                                       accept="image/*,application/pdf"/>
                                            </div>
                                        </div>
                                        <div class="form-group row form-field o_website_form_required">
                                            <div class="col-lg-9 col-md-12 col-sm-12">
                                                <input type="checkbox" name="confirm_identity" id="confirm_identity"
                                                       required="1"/>
                                                <label for="confirm_identity"
                                                       style="margin-left:8px;font-weight:normal !important;display:unset !important;">
                                                    Je confirme avoir soumis le recto et le verso
                                                </label>
                                            </div>
                                        </div>
<!--                                        <div class="form-group row form-field o_website_form_required">-->
<!--                                            <div class="col-lg-9 col-md-12 col-sm-12">-->
<!--                                                <label class="col-form-label" for="number">N°Pièce d'identité</label>-->
<!--                                            </div>-->
<!--                                            <div class="col-lg-9 col-md-12 col-sm-12">-->
<!--                                                <input type="text" class="form-control o_website_form_input"-->
<!--                                                       name="identity_number"-->
<!--                                                       required="0"/>-->
<!--                                            </div>-->
<!--                                        </div>-->
                                        <div class="form-group row">
                                            <div class="col-md-8 col-lg-7">
                                                <button type="submit" class="btn btn-primary centered-content" onclick="spin_on_load()"
                                                        id="submit_documents"
                                                        style="width: 100% !important;">
                                                    Envoyer
                                                    <span class="fa fa-1x fa-fw fa-long-arrow-right ml-1"></span>
                                                </button>
                                                <span id="o_website_form_result"></span>
                                            </div>
                                        </div>
                                        <!--Script spin load-->
                                        <script>
                                            document.addEventListener ("DOMContentLoaded", function()
                                             {
                                             document.getElementById('spin_load_form').style.display= "none"; });
                                             function spin_on_load() {
                                                var carte_recto_lenth_files = document.getElementById("identity").files.length;
                                                var carte_verso_lenth_files = document.getElementById("identity2").files.length;
                                                if (carte_recto_lenth_files >= 1)
                                                {
                                                  if (carte_verso_lenth_files >= 1)
                                                  {
                                                    document.getElementById('spin_load_form').style.display = "block";
                                                  }
                                                 }
                                                }
                                            document.getElementById("submit_documents").onclick = function() {spin_on_load()};

                                        </script>
                                    </form>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>