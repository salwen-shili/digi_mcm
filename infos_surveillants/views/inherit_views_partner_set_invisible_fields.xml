<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- inherit_crm_partner_view_form to set invisible smart button if a partner a supervisor-->
    <record model="ir.ui.view" id="inherit_crm_partner_view_form">
        <field name="name">Partner Opportunities</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='436']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="inherit_sales_partner_view_form">
        <field name="name">Partner Sales</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="sale.res_partner_view_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='317']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="hide_pedagogique_res_partner_page">
        <field name="name">Partner Pedagogique</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="plateforme_pedagogique.partner_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='pedagogique']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!--Hide Page "financement" if est_surveillant = true-->
    <record id="hide_financement_res_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="mcm_session.mcmacademy_session_view_res_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='financement']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="inherit_session_partner_view_form">
        <field name="name">Partner Sessions</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="examen_cma_fields.res_partner_examen_cma_view_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='get_sessions_history']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="inherit_historic_session_partner_view_form">
        <field name="name">Partner Historic Session</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="partner_exam.inherit_partner_for_report_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='get_sessions_history']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="inherit_notes_exams_partner_view_form">
        <field name="name">Partner Notes Exams</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="mcm_session.mcmacademy_view_res_partner_form_3"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='get_notes_history']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='note_exam']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//label[@for='note_exam']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//page[@name='note_exam']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inherit view mcmacademy_view_res_partner_form to set button modifier statut invisible if a partner an supervisor -->
    <record model="ir.ui.view" id="inherit_invisible_statut_partner_view_form">
        <field name="name">Partner Invisible Statut</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="mcm_session.mcmacademy_view_res_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='statut']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_validate']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_statut']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inherit view plateforme_pedagogique.partner_form_view to set Invisible Button ADD/DELETE from 360 if a partner an supervisor -->
    <record model="ir.ui.view" id="inherit_invisible_buttons_360_view_form">
        <field name="name">Partner Invisible Button ADD/DELETE from 360</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="plateforme_pedagogique.partner_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='ajouter_iOne_manuelle']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='supprimer_ione_manuelle']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inherit partner module to set session page in form view invisible if partner is an supervisor -->
    <record model="ir.ui.view" id="partner_invisible_session_view_form">
        <field name="name">Partner set invible session page</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="mcm_add_fields.mcm_view_res_partner_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='session']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inherit partner module to add condition for Partner Ledger in form view invisible if partner is an supervisor -->
    <record model="ir.ui.view" id="partner_invisible_ledger_view_form">
        <field name="name">Partner set invible Partner Ledger Smart button</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account_reports.partner_view_buttons"></field>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='open_partner_ledger']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inherit partner module to hide calendly field -->
    <record model="ir.ui.view" id="partner_invisible_calendly_view_form">
        <field name="name">Partner Hide Calendly Field</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="calendly_api_integration.mcm_calendly_view_res_partner_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='calendly']" position="attributes">
                <attribute name="attrs">{'invisible': [('est_surveillant', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>
</odoo>